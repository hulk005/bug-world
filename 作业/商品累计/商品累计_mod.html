<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<style>
			body,
			ul,
			li {
				margin: 0;
				padding: 0;
				list-style: none;
			}
		</style>
		<link rel="stylesheet" type="text/css" href="price.css" />
	</head>

	<body onselectstart="return false;">
		<div class="wrap">
			<div class="box">
				<ul class="list">
					<!-- <li>
						<i></i>
						<em>0</em>
						<i></i>
						<span>
							单价：<strong>12.5元 </strong> 小计：<strong>0元</strong>
						</span>
					</li> -->
					<li>
							<i></i>
							<em>0</em>
							<i></i>
							<span>
								单价：<strong>12.5</strong> 小计：<strong>0元</strong>
							</span>
						</li>
					<li>
						<i></i>
						<em>0</em>
						<i></i>
						<span>
							单价：<strong>10.5元 </strong> 小计：<strong>0元</strong>
						</span>
					</li>
					<li>
						<i></i>
						<em>0</em>
						<i></i>
						<span>
							单价：<strong>8.5元 </strong> 小计：<strong>0元</strong>
						</span>
					</li>
					<li>
						<i></i>
						<em>0</em>
						<i></i>
						<span>
							单价：<strong>8元 </strong> 小计：<strong>0元</strong>
						</span>
					</li>
					<li>
						<i></i>
						<em>0</em>
						<i></i>
						<span>
							单价：<strong>14.5元 </strong> 小计：<strong>0元</strong>
						</span>
					</li>
				</ul>
				<div class="info" id="info">
					<span>商品公合计：<em>0</em>件</span>
					<span>共花费了：<em>0</em>元</span>
					<br />
					<br />
					<span>其中最贵的商品单价是：<em>0</em>元</span>
				</div>
			</div>
		</div>
<script>

	// let arr = [12.5,10.5,8.5,8,14.5];
	// console.log(Math.max(...arr));

	let ul = document.getElementsByClassName('list');
	let lis = document.getElementsByTagName('li');

	let bottom = document.getElementById('info');
	let spans = bottom.getElementsByTagName('span');
	let ems = bottom.getElementsByTagName('em');
	
	for (let i=0;i<lis.length;i++){
		fn(lis[i])
	};

	function fn(li){
		let btns = li.getElementsByTagName('i');
		let _em = li.getElementsByTagName('em')[0];
		
		let danjia = li.getElementsByTagName('strong')[0];
		let xiaoji = li.getElementsByTagName('strong')[1];

		let n = Number(_em.innerHTML);
        console.log("n:", n);
		let m = parseFloat(danjia.innerHTML);

		btns[0].onclick = function(){
			n--;
			if(n < 0) n = 0;
		
		_em.innerHTML = n;
		xiaoji.innerHTML = n*m + '元';
		}	

		btns[1].onclick =function(){
			n++;

	        console.log("n:", n);

			_em.innerHTML = n;
			xiaoji.innerHTML = n*m + '元';	
			
			
			ems[0] = '';
			ems[0].innerHTML = Number(_em.innerHTML);
			
			let totalCount = 0;
			let totalPrice = 0;
			for (let i = 0; i < lis.length; ++i) {
				let li = lis[i];

				let count = li.getElementsByTagName('em')[0].innerHTML;
				let price = li.getElementsByTagName('strong')[0].innerHTML.replace("元", "");
				let total = li.getElementsByTagName('strong')[1].innerHTML.replace("元", "");
				console.log("count: ", count, "price: ", price, "total: ", total);

				totalCount += Number(count);
				totalPrice += price * count;
			}

			ems[0].innerHTML = totalCount;
			ems[1].innerHTML = totalPrice;
		}
	}	


	

	// ems.onclick = function(){

	// }
	
			
	
		
		
		
	

</script>
</body>

</html>
